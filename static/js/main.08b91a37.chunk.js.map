{"version":3,"sources":["document.tsx","tool/line.tsx","App.tsx","index.tsx"],"names":["ActionType","initialState","paths","reducer","state","action","type","AddPath","d","useDocument","useReducer","doc","dispatch","addPath","toCode","join","toCompiled","SvgComponent","children","xmlns","viewBox","stroke","dString","drag","initial","x","offset","y","current","Line","dragging","useState","setDrag","Tool","ChildComponent","onMouseDown","e","button","stopPropagation","bounding","target","getBoundingClientRect","clientX","clientY","onMouseMove","onMouseUp","Toolbar","name","value","Canvas","style","width","height","background","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.08b91a37.chunk.js","sourcesContent":["import React, { useReducer } from 'react';\n\nexport interface Document {\n\tpaths: string[];\n};\n\nenum ActionType {\n\tAddPath,\n}\n\ntype Action = { type: ActionType.AddPath, d: string };\n\nconst initialState : Document = {\n\tpaths: []\n};\n\nconst reducer = (state : Document, action : Action) => {\n\tswitch(action.type) {\n\t\tcase ActionType.AddPath:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpaths: [\n\t\t\t\t\taction.d,\n\t\t\t\t\t...(state.paths)\n\t\t\t\t],\n\t\t\t};\n\t}\n\n\treturn state;\n};\n\nconst useDocument = () => {\n\tconst [doc, dispatch] = useReducer(reducer, initialState);\n\n\tconst addPath = (d: string) => {\n\t\tdispatch({ type: ActionType.AddPath, d });\n\t}\n\n\tconst toCode = () => {\n\t\treturn `\nimport React from 'react';\n\nconst Component = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1200 800\">\n      <path stroke=\"black\" d=\"${doc.paths.join(' ')}\" />\n    </svg>\n  );\n};\n\ndefault export Component;\n`;\n\t}\n\n\tconst toCompiled = () => {\n\t\treturn 'To be implemented...';\n\t}\n\n\tconst SvgComponent : React.FC = ({ children }) => {\n\t\treturn <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1200 800\">\n\t\t\t<path stroke='black' d={doc.paths.join(' ')}/>\n\t\t\t{children}\n\t\t</svg>;\n\t}\n\n\treturn {\n\t\tdoc,\n\t\taddPath,\n\t\ttoCode,\n\t\ttoCompiled,\n\t\tSvgComponent,\n\t};\n}\n\nexport default useDocument;\n","import React, { useState } from 'react';\nimport { Document } from '../document';\n\ninterface Vector {\n\tx: number;\n\ty: number;\n}\n\ninterface Draggable {\n\tdragging: boolean;\n\tinitial: Vector;\n\tcurrent: Vector;\n\toffset: Vector;\n}\n\nconst dString = (drag : Draggable) => {\n\treturn `M ${drag.initial.x - drag.offset.x} ${drag.initial.y - drag.offset.y} L ${drag.current.x - drag.offset.x} ${drag.current.y - drag.offset.y}`;\n}\n\ninterface Props {\n\tdoc: Document;\n\taddPath: Function;\n\tchildren: Function;\n}\n\nconst Line : React.FC<Props> = ({ doc, addPath, children }) => {\n\tconst initialState : Draggable = {\n\t\tdragging: false,\n\t\tinitial: { x: 0, y: 0 },\n\t\tcurrent: { x: 0, y: 0 },\n\t\toffset: { x: 0, y: 0 },\n\t};\n\tconst [drag, setDrag] = useState<Draggable>(initialState);\n\n\tconst onMouseDown = (e : React.MouseEvent<HTMLElement, MouseEvent>) => {\n\t\tif(e.button === 0) {\n\t\t\te.stopPropagation();\n\t\t\tconst bounding = (e.target as HTMLElement).getBoundingClientRect();\n\t\t\tsetDrag({\n\t\t\t\tdragging: true,\n\t\t\t\tinitial: {\n\t\t\t\t\tx: e.clientX,\n\t\t\t\t\ty: e.clientY,\n\t\t\t\t},\n\t\t\t\toffset: {\n\t\t\t\t\tx: bounding.x,\n\t\t\t\t\ty: bounding.y,\n\t\t\t\t},\n\t\t\t\tcurrent: {\n\t\t\t\t\tx: e.clientX,\n\t\t\t\t\ty: e.clientY,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\tconst onMouseMove = (e: React.MouseEvent<HTMLElement, MouseEvent>) => {\n\t\tif(drag.dragging) {\n\t\t\tsetDrag({\n\t\t\t\t...drag,\n\t\t\t\tcurrent: {\n\t\t\t\t\tx: e.clientX,\n\t\t\t\t\ty: e.clientY,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t};\n\tconst onMouseUp = (e: React.MouseEvent<HTMLElement, MouseEvent>) => {\n\t\tif(drag.dragging) {\n\t\t\taddPath(dString(drag));\n\t\t\tsetDrag(initialState);\n\t\t}\n\t};\n\n\tconst Tool = () => drag.dragging ? (\n\t\t<path stroke='black' d={dString(drag)} />\t\t\n\t) : null;\n\n\tconst ChildComponent : React.FC = children as any;\n\n\treturn <div\n\t\tonMouseDown={onMouseDown}\n\t\tonMouseMove={onMouseMove}\n\t\tonMouseUp={onMouseUp}\n\t>\n\t\t<ChildComponent>\n\t\t\t<Tool />\n\t\t</ChildComponent>\n\t</div>;\n};\n\nexport default Line;\n","import React  from 'react';\nimport useDocument, { Document } from './document';\nimport Line from './tool/line';\n\nconst Toolbar : React.FC = ({ children }) => {\n\treturn <div>\n\t{children}\n\t</div>;\n};\n\nconst Tool : React.FC<{ children: string }> = ({ children }) => {\n\treturn <label><input type=\"radio\" name=\"toolbar-tool\" value={children} />\n\t{children}\n\t</label>;\n};\n\ninterface CanvasProps {\n\tdoc: Document;\n\taddPath: Function;\n\tSvgComponent: Function;\n\tTool: Function;\n}\n\nconst Canvas : React.FC<CanvasProps> = ({ doc, addPath, SvgComponent, Tool }) => {\n\tconst RenderComp : React.FC = ({ children }) => (\n\t\t<div style={{ width: '1200px', height: '800px', background: '#eee' }}>\n\t\t\t<SvgComponent>{children}</SvgComponent>\n\t\t</div>\n\t);\n\n\treturn <Tool doc={doc} addPath={addPath}>{RenderComp}</Tool>\n};\n\nconst App : React.FC = () => {\n\tconst {\n\t\tdoc,\n\t\taddPath,\n\t\ttoCode,\n\t\ttoCompiled,\n\t\tSvgComponent,\n\t} = useDocument();\n\n  return (\n\t\t<div>\n\t\t\t<h1> Canvas </h1>\n\t\t\t<Toolbar>\n\t\t\t\t<Tool>Select</Tool>\n\t\t\t\t<Tool>Line Tool</Tool>\n\t\t\t\t<Tool>Freehand</Tool>\n\t\t\t</Toolbar>\n\t\t\t<Canvas doc={doc} addPath={addPath} SvgComponent={SvgComponent} Tool={Line} />\n\t\t\t<h1> Source </h1>\n\t\t\t<pre><code>{toCode()}</code></pre>\n\t\t\t<h1> Compiled </h1>\n\t\t\t<pre><code>{toCompiled()}</code></pre>\n\t\t</div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}