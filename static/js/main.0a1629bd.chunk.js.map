{"version":3,"sources":["document.ts","App.tsx","index.tsx"],"names":["ActionType","initialState","paths","reducer","state","action","type","AddPath","d","useDocument","useReducer","doc","dispatch","addPath","toCode","join","dString","drag","initial","x","offset","y","current","Canvas","dragging","useState","setDrag","style","width","height","background","onMouseDown","e","button","stopPropagation","bounding","target","getBoundingClientRect","clientX","clientY","onMouseMove","onMouseUp","xmlns","viewBox","stroke","undefined","App","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"sGAMKA,E,sEAAAA,O,sBAAAA,M,KAML,IAAMC,EAA0B,CAC/BC,MAAO,IAGFC,EAAU,SAACC,EAAkBC,GAClC,OAAOA,EAAOC,MACb,KAAKN,EAAWO,QACf,OAAO,2BACHH,GADJ,IAECF,MAAM,CACLG,EAAOG,GADH,mBAEAJ,EAAMF,UAKd,OAAOE,GAiCOK,EA9BK,WAAO,IAAD,EACDC,qBAAWP,EAASF,GADnB,mBAClBU,EADkB,KACbC,EADa,KAuBzB,MAAO,CACND,MACAE,QAtBe,SAACL,GAChBI,EAAS,CAAEN,KAAMN,EAAWO,QAASC,OAsBrCM,OAnBc,WACd,MAAM,+KAAN,OAM8BH,EAAIT,MAAMa,KAAK,KAN7C,gECxBIC,EAAU,SAACC,GAChB,MAAM,KAAN,OAAYA,EAAKC,QAAQC,EAAIF,EAAKG,OAAOD,EAAzC,YAA8CF,EAAKC,QAAQG,EAAIJ,EAAKG,OAAOC,EAA3E,cAAkFJ,EAAKK,QAAQH,EAAIF,EAAKG,OAAOD,EAA/G,YAAoHF,EAAKK,QAAQD,EAAIJ,EAAKG,OAAOC,IAQ5IE,EAAiC,SAAC,GAAsB,IAApBZ,EAAmB,EAAnBA,IAAKE,EAAc,EAAdA,QACxCZ,EAA2B,CAChCuB,UAAU,EACVN,QAAS,CAAEC,EAAG,EAAGE,EAAG,GACpBC,QAAS,CAAEH,EAAG,EAAGE,EAAG,GACpBD,OAAQ,CAAED,EAAG,EAAGE,EAAG,IALwC,EAOpCI,mBAAoBxB,GAPgB,mBAOrDgB,EAPqD,KAO/CS,EAP+C,KAiD5D,OAAO,qBACNC,MAAO,CAAEC,MAAO,SAAUC,OAAQ,QAASC,WAAY,QACvDC,YA1CmB,SAACC,GACpB,GAAgB,IAAbA,EAAEC,OAAc,CAClBD,EAAEE,kBACF,IAAMC,EAAYH,EAAEI,OAAuBC,wBAC3CX,EAAQ,CACPF,UAAU,EACVN,QAAS,CACRC,EAAGa,EAAEM,QACLjB,EAAGW,EAAEO,SAENnB,OAAQ,CACPD,EAAGgB,EAAShB,EACZE,EAAGc,EAASd,GAEbC,QAAS,CACRH,EAAGa,EAAEM,QACLjB,EAAGW,EAAEO,aA2BRC,YAtBmB,SAACR,GACjBf,EAAKO,UACPE,EAAQ,2BACJT,GADG,IAENK,QAAS,CACRH,EAAGa,EAAEM,QACLjB,EAAGW,EAAEO,aAiBRE,UAXiB,SAACT,GACff,EAAKO,WACPX,EAAQG,EAAQC,IAChBS,EAAQzB,KAIH,SAML,sBAAKyC,MAAM,6BAA6BC,QAAQ,eAAhD,UACC,sBAAMC,OAAO,QAAQpC,EAAGG,EAAIT,MAAMa,KAAK,OAEtCE,EAAKO,SACJ,sBAAMoB,OAAO,QAAQpC,EAAGQ,EAAQC,UAC7B4B,QAyBMC,EAnBQ,WAAO,IAAD,EACKrC,IAAzBE,EADoB,EACpBA,IAAKE,EADe,EACfA,QAASC,EADM,EACNA,OAErB,OACA,gCACC,0CACA,cAAC,EAAD,CAAQH,IAAKA,EAAKE,QAASA,IAC3B,0CACA,8BAAK,+BAAOC,QACZ,4CACH,8BACA,6CCjGAiC,IAASC,OACP,cAAC,IAAMC,WAAP,UACE,cAAC,EAAD,MAEFC,SAASC,eAAe,W","file":"static/js/main.0a1629bd.chunk.js","sourcesContent":["import { useReducer } from 'react';\n\nexport interface Document {\n\tpaths: string[];\n};\n\nenum ActionType {\n\tAddPath,\n}\n\ntype Action = { type: ActionType.AddPath, d: string };\n\nconst initialState : Document = {\n\tpaths: []\n};\n\nconst reducer = (state : Document, action : Action) => {\n\tswitch(action.type) {\n\t\tcase ActionType.AddPath:\n\t\t\treturn {\n\t\t\t\t...state,\n\t\t\t\tpaths: [\n\t\t\t\t\taction.d,\n\t\t\t\t\t...(state.paths)\n\t\t\t\t],\n\t\t\t};\n\t}\n\n\treturn state;\n};\n\nconst useDocument = () => {\n\tconst [doc, dispatch] = useReducer(reducer, initialState);\n\n\tconst addPath = (d: string) => {\n\t\tdispatch({ type: ActionType.AddPath, d });\n\t}\n\n\tconst toCode = () => {\n\t\treturn `\nimport React from 'react';\n\nconst Component = () => {\n  return (\n    <svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1200 800\">\n      <path stroke=\"black\" d=\"${doc.paths.join(' ')}\" />\n    </svg>\n  );\n};\n\ndefault export Component;\n`;\n\t}\n\n\treturn {\n\t\tdoc,\n\t\taddPath,\n\t\ttoCode,\n\t};\n}\n\nexport default useDocument;\n","import React, { useState }  from 'react';\nimport useDocument, { Document } from './document';\n\ninterface Vector {\n\tx: number;\n\ty: number;\n}\n\ninterface Draggable {\n\tdragging: boolean;\n\tinitial: Vector;\n\tcurrent: Vector;\n\toffset: Vector;\n}\n\nconst dString = (drag : Draggable) => {\n\treturn `M ${drag.initial.x - drag.offset.x} ${drag.initial.y - drag.offset.y} L ${drag.current.x - drag.offset.x} ${drag.current.y - drag.offset.y}`;\n}\n\ninterface CanvasProps {\n\tdoc: Document;\n\taddPath: Function;\n}\n\nconst Canvas : React.FC<CanvasProps> = ({ doc, addPath }) => {\n\tconst initialState : Draggable = {\n\t\tdragging: false,\n\t\tinitial: { x: 0, y: 0 },\n\t\tcurrent: { x: 0, y: 0 },\n\t\toffset: { x: 0, y: 0 },\n\t};\n\tconst [drag, setDrag] = useState<Draggable>(initialState);\n\n\tconst onMouseDown = (e : React.MouseEvent<HTMLElement, MouseEvent>) => {\n\t\tif(e.button === 0) {\n\t\t\te.stopPropagation();\n\t\t\tconst bounding = (e.target as HTMLElement).getBoundingClientRect();\n\t\t\tsetDrag({\n\t\t\t\tdragging: true,\n\t\t\t\tinitial: {\n\t\t\t\t\tx: e.clientX,\n\t\t\t\t\ty: e.clientY,\n\t\t\t\t},\n\t\t\t\toffset: {\n\t\t\t\t\tx: bounding.x,\n\t\t\t\t\ty: bounding.y,\n\t\t\t\t},\n\t\t\t\tcurrent: {\n\t\t\t\t\tx: e.clientX,\n\t\t\t\t\ty: e.clientY,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t};\n\tconst onMouseMove = (e: React.MouseEvent<HTMLElement, MouseEvent>) => {\n\t\tif(drag.dragging) {\n\t\t\tsetDrag({\n\t\t\t\t...drag,\n\t\t\t\tcurrent: {\n\t\t\t\t\tx: e.clientX,\n\t\t\t\t\ty: e.clientY,\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t};\n\tconst onMouseUp = (e: React.MouseEvent<HTMLElement, MouseEvent>) => {\n\t\tif(drag.dragging) {\n\t\t\taddPath(dString(drag));\n\t\t\tsetDrag(initialState);\n\t\t}\n\t};\n\n\treturn <div\n\t\tstyle={{ width: '1200px', height: '800px', background: '#eee' }}\n\t\tonMouseDown={onMouseDown}\n\t\tonMouseMove={onMouseMove}\n\t\tonMouseUp={onMouseUp}\n\t\t>\n\t\t\t<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 1200 800\">\n\t\t\t\t<path stroke='black' d={doc.paths.join(' ')}/>\n\t\t\t\t{\n\t\t\t\t\tdrag.dragging ? (\n\t\t\t\t\t\t<path stroke='black' d={dString(drag)} />\t\t\n\t\t\t\t\t) : undefined\n\t\t\t\t}\n\t\t\t</svg>\n\t\t</div>;\n};\n\nconst App : React.FC = () => {\n\tconst { doc, addPath, toCode } = useDocument();\n\n  return (\n\t\t<div>\n\t\t\t<h1> Canvas </h1>\n\t\t\t<Canvas doc={doc} addPath={addPath} />\n\t\t\t<h1> Source </h1>\n\t\t\t<pre><code>{toCode()}</code></pre>\n\t\t\t<h1> Compiled </h1>\n<pre>\n<code>\n...\n</code>\n</pre>\n\t\t</div>\n  );\n};\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}